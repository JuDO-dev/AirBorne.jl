<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Event Driven Simulation · AirBorne.jl</title><script data-outdated-warner src="../../../assets/warner.js"></script><link rel="canonical" href="https://JuDO-dev.github.io/AirBorne.jl/pages/backtesting/eventDrivenSimulation/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../../"><img src="../../../assets/logo.svg" alt="AirBorne.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../../">AirBorne.jl</a></span></div><form class="docs-search" action="../../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../../">Home</a></li><li><span class="tocitem">High Level Design</span><ul><li><a class="tocitem" href="../../highLevelDesign/">Glossary</a></li><li><a class="tocitem" href="../../etl/etl/">Data Pipeline</a></li><li><a class="tocitem" href="../../financialModelling/">Financial Modelling</a></li><li class="is-active"><a class="tocitem" href>Event Driven Simulation</a><ul class="internal"><li><a class="tocitem" href="#Engines"><span>Engines</span></a></li></ul></li></ul></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../../examples/SMA/">Strategy: SMA </a></li></ul></li><li><a class="tocitem" href="../../autodocs/">Autodocs</a></li><li><a class="tocitem" href="../../contributionGuidelines/">Contribution Guidelines</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">High Level Design</a></li><li class="is-active"><a href>Event Driven Simulation</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Event Driven Simulation</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuDO-dev/Airborne.jl/blob/dev/docs/src/pages/backtesting/eventDrivenSimulation.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Backtesting-and-Event-Driven-Simulation"><a class="docs-heading-anchor" href="#Backtesting-and-Event-Driven-Simulation">Backtesting and Event Driven Simulation</a><a id="Backtesting-and-Event-Driven-Simulation-1"></a><a class="docs-heading-anchor-permalink" href="#Backtesting-and-Event-Driven-Simulation" title="Permalink"></a></h1><p>In this section the main principles guiding the Event Driven Simulation engine used for backtesting is laid out.</p><h3 id="Guiding-Principles"><a class="docs-heading-anchor" href="#Guiding-Principles">Guiding Principles</a><a id="Guiding-Principles-1"></a><a class="docs-heading-anchor-permalink" href="#Guiding-Principles" title="Permalink"></a></h3><p>The driving principles for backtesting are the following:</p><ul><li><strong>Speedeness:</strong> The simulation should be fast, extremely fast, so that most of the computational resources can be allocated to calculations that the user wants to do within the simulation. </li><li><strong>Transparency:</strong> Calculations should be as accurate, explainable and reproducible. Meaning that a user with some level of proficiency in Excel should be able to get back most of the calculations based solely on the description of the simulation and its calculations obtained in the documentation.</li><li><strong>Realism:</strong> From the user perspective the procedure of the simulation should have a strong correlation to what they would expect to see when trading in real life.</li></ul><h3 id="Design"><a class="docs-heading-anchor" href="#Design">Design</a><a id="Design-1"></a><a class="docs-heading-anchor-permalink" href="#Design" title="Permalink"></a></h3><p>The objective of event driven simulation is to do calculations only when necessary and making them as small as possible whilst at the same time having as many simulation points as needed to achieve realism.</p><ol><li>Simulation starts by defining the <strong>event_queue</strong> which is a list of events, each event carries with them a timestamp and some minimal metadata that determines the workflow of the simulation.</li><li>At the beginning of the routine a special event called <strong>initialization_event</strong> is defined and added to the queue starting the simulation.</li><li>At the <strong>initialization_event</strong> the <strong>initialize</strong> method of the agent is called.<ol><li>During this stage the agent should decide how often the market(s) sends him data by either specifying a frequency or scheduling a future <strong>release<em>data</em>event</strong> event for a particular market(s).</li><li>During this stage a Dictionary <strong>context</strong> will be created, this variable will be propagated throughout the simulation./</li><li>If desired the agent can also perform actions such as place orders through a broker the orders placed will be placed in a list called <strong>order_queue</strong>.</li><li>During this stage the broker used and its fee structure needs to also be defined, it can be modified at any point down the line but is assumed that the transactions are done through a broker during the simulation. Special broker to simulate the direct trade by the agent can also be put in place within this framework.  </li></ol></li><li>At the end of the event brokers shall decide how to execute the order by interacting with markets generating a list of <strong>order<em>execution</em>queue</strong>.</li><li>Then each market will execute the orders in unobservable  events that are communicated to brokers with potentially some delay or noise. Is worth noticing that some orders may have triggering conditions like sell only for a certain amount of currency for example, therefore the triggering of the execution will be left to the market through <strong>execution_events</strong>. <strong>execution_events</strong> can also include the payment of dividends. </li><li>At the <strong>release<em>data</em>event</strong> the  <strong>handle_data</strong> event is called. The data available is the data from a bundle with a timestamp smaller than the time of the event.</li></ol><p>This framework allows to have variable timewindows for the agent controlled dynamically by the agent himself.</p><h2 id="Engines"><a class="docs-heading-anchor" href="#Engines">Engines</a><a id="Engines-1"></a><a class="docs-heading-anchor-permalink" href="#Engines" title="Permalink"></a></h2><h3 id="DEDS"><a class="docs-heading-anchor" href="#DEDS">DEDS</a><a id="DEDS-1"></a><a class="docs-heading-anchor-permalink" href="#DEDS" title="Permalink"></a></h3><p>Deterministic Event Driven Simulation (DEDS) is an engine that executes a series of events where a <strong>Market</strong> and a <strong>User</strong> interact with each other. The simulation iterates over a series of events allowing the user to retrieve data from the market and place orders, then the market executes the orders in between consecutive events.</p><p>Below one can appreciate the logic behind the <a href="../../autodocs/#AirBorne.Engines.DEDS.run-Tuple{DataFrames.DataFrame, Vararg{Function, 4}}"><code>AirBorne.Engines.DEDS.run</code></a> function, which is the run method for the DEDS engine.</p><p><img src="../figures/DEDS_run.svg" alt="DEDS_run"/></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../financialModelling/">« Financial Modelling</a><a class="docs-footer-nextpage" href="../../examples/SMA/">Strategy: SMA  »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Thursday 13 July 2023 15:59">Thursday 13 July 2023</span>. Using Julia version 1.9.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
