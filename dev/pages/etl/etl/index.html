<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Data Pipeline · AirBorne.jl</title><script data-outdated-warner src="../../../assets/warner.js"></script><link rel="canonical" href="https://JuDO-dev.github.io/AirBorne.jl/pages/etl/etl/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../../"><img src="../../../assets/logo.svg" alt="AirBorne.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../../">AirBorne.jl</a></span></div><form class="docs-search" action="../../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../../">Home</a></li><li><span class="tocitem">High Level Design</span><ul><li><a class="tocitem" href="../../highLevelDesign/">Glossary</a></li><li class="is-active"><a class="tocitem" href>Data Pipeline</a><ul class="internal"><li><a class="tocitem" href="#Cache-Structure"><span>Cache Structure</span></a></li><li><a class="tocitem" href="#Supported-schemas-and-file-structure"><span>Supported schemas and file structure</span></a></li><li><a class="tocitem" href="#File-structures-on-other-platforms"><span>File structures on other platforms</span></a></li></ul></li><li><a class="tocitem" href="../../financialModelling/">Financial Modelling</a></li><li><a class="tocitem" href="../../backtesting/eventDrivenSimulation/">Event Driven Simulation</a></li></ul></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../../examples/Strategies/">Strategies</a></li></ul></li><li><a class="tocitem" href="../../autodocs/">Autodocs</a></li><li><a class="tocitem" href="../../contributionGuidelines/">Contribution Guidelines</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">High Level Design</a></li><li class="is-active"><a href>Data Pipeline</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Data Pipeline</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuDO-dev/Airborne.jl/blob/dev/docs/src/pages/etl/etl.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="ETL-Pipeline."><a class="docs-heading-anchor" href="#ETL-Pipeline.">ETL Pipeline.</a><a id="ETL-Pipeline.-1"></a><a class="docs-heading-anchor-permalink" href="#ETL-Pipeline." title="Permalink"></a></h1><blockquote><p>ETL, standing for Extract, Transform and Load, is the process of combining data from multiple sources into a large central repository of data. <a href="https://aws.amazon.com/what-is/etl/">What is ETL? (AWS)</a></p></blockquote><p>This package should have an ETL capability to retrieve and store financial data </p><h4 id=".-Extract"><a class="docs-heading-anchor" href="#.-Extract">1. Extract</a><a id=".-Extract-1"></a><a class="docs-heading-anchor-permalink" href="#.-Extract" title="Permalink"></a></h4><p>Data can extracted from:</p><ol><li>APIs of data providers such as Quandl or Yahoo</li><li>APIs of brokers such as Alpaca</li><li>Local files such as CSVs or JSON with a predetermined format</li></ol><h4 id=".-Transform"><a class="docs-heading-anchor" href="#.-Transform">2. Transform</a><a id=".-Transform-1"></a><a class="docs-heading-anchor-permalink" href="#.-Transform" title="Permalink"></a></h4><p>Once the data is extracted it locally is formatted and cleaned to standarize the format and schema they should comply with.</p><h4 id=".-Load"><a class="docs-heading-anchor" href="#.-Load">3. Load</a><a id=".-Load-1"></a><a class="docs-heading-anchor-permalink" href="#.-Load" title="Permalink"></a></h4><p>Lastly the data is served into a variable accessible for the package and persisted in an efficient file format.</p><h2 id="Cache-Structure"><a class="docs-heading-anchor" href="#Cache-Structure">Cache Structure</a><a id="Cache-Structure-1"></a><a class="docs-heading-anchor-permalink" href="#Cache-Structure" title="Permalink"></a></h2><p>Caching is the local storage of information. Once data has been gathered from a datasource such as Yahoo Finance, Quandl or even simply loaded in memory from a file. Once can choose to store this data so that it can be efficiently retrieved once again by AirBorne.</p><p>The features we aim to obtain with caching are the following:</p><ol><li><strong>I/O Speed</strong>: Loading and storing data should be fast, faster than the average loading from a CSV or JSON file. And definitely faster than any API call. </li><li><strong>Intuitive</strong>: Users should not have to struggle to retrieve data or store data, if possible this should be done seamlessly in the workflow of the user.</li><li><strong>Version Controlled</strong>: We all make mistakes and sometimes we would like to roll back changes made to our data. This should be possible to achieve.</li><li><strong>Standardized</strong>: Although is good to have ample formats available when it comes to storage is good to have standard file formats, this makes the data compliant with many algorithms as the algorithms will be designed with this standard in mind. This also greatly helps speed as the load and storage of data happen in a predefined manner.</li></ol><h3 id="How-does-it-work?"><a class="docs-heading-anchor" href="#How-does-it-work?">How does it work?</a><a id="How-does-it-work?-1"></a><a class="docs-heading-anchor-permalink" href="#How-does-it-work?" title="Permalink"></a></h3><p>First one needs a cache folder, which can be set by the environment variable <code>AIRBORNE_ROOT</code>. If this variable is not defined for Linux and MacOS it will defaulted to <code>/root/tmp/.AirBorne/.cache</code> whilst in windows it shall be <code>$HOME/.AirBorne/.cache&quot;</code>.</p><p>On said folder there will be many subdirectories, each one corresponding to a separate data bundle. A bundle is the most fundamental level of cache, that is composed by 3 elements. The data file, which is stored in Parquet Format, the metadata that is attached to the parquet file itself, and the archive subfolder containing previous iterations of the cached file.</p><h2 id="Supported-schemas-and-file-structure"><a class="docs-heading-anchor" href="#Supported-schemas-and-file-structure">Supported schemas and file structure</a><a id="Supported-schemas-and-file-structure-1"></a><a class="docs-heading-anchor-permalink" href="#Supported-schemas-and-file-structure" title="Permalink"></a></h2><h3 id="OHLCV"><a class="docs-heading-anchor" href="#OHLCV">OHLCV</a><a id="OHLCV-1"></a><a class="docs-heading-anchor-permalink" href="#OHLCV" title="Permalink"></a></h3><h2 id="File-structures-on-other-platforms"><a class="docs-heading-anchor" href="#File-structures-on-other-platforms">File structures on other platforms</a><a id="File-structures-on-other-platforms-1"></a><a class="docs-heading-anchor-permalink" href="#File-structures-on-other-platforms" title="Permalink"></a></h2><p>Many trading platforms have their own schemas for data</p><h5 id="Zorro&#39;s"><a class="docs-heading-anchor" href="#Zorro&#39;s">Zorro&#39;s</a><a id="Zorro&#39;s-1"></a><a class="docs-heading-anchor-permalink" href="#Zorro&#39;s" title="Permalink"></a></h5><p>The <a href="https://zorro-project.com/manual/en/data.htm">zorro project</a> have what they call the T file formats, where a tx file a timestamp &quot;t&quot; and x elements. These files are CSV or JSON files stored in </p><h6 id="Headers:"><a class="docs-heading-anchor" href="#Headers:">Headers:</a><a id="Headers:-1"></a><a class="docs-heading-anchor-permalink" href="#Headers:" title="Permalink"></a></h6><ul><li><strong>Start</strong> - token name or start string of the whole price structure. Determines from where to parse.</li><li><strong>Timeformat</strong> - format of the date/time field with DATE format codes, as in the CSV format string.</li><li><strong>Time</strong> - token name of the date/time field.</li><li><strong>High,Low,Open,Close</strong> - token names of the price fields.</li><li><strong>AdjClose</strong> - token name of the adjusted close field, or empty if the file contains no such field.</li><li><strong>Volume</strong> - toke name of the volume field, or empty if the file contains no volume data.</li><li><strong>Ask</strong> - token name of the best ask quote field.</li><li><strong>AskSize</strong> - token name of the ask size field.</li><li><strong>Bid</strong> - token name of the best bid quote field, or empty if the file contains no bid quotes.</li><li><strong>BidSize</strong> - token name of the bid size field, or empty.</li></ul><h6 id="File-Format:"><a class="docs-heading-anchor" href="#File-Format:">File Format:</a><a id="File-Format:-1"></a><a class="docs-heading-anchor-permalink" href="#File-Format:" title="Permalink"></a></h6><pre><code class="language-c hljs">typedef struct T1
{
  DATE  time; // UTC timestamp of the tick in DATE format
  float fPrice; // price data, positive for ask and negative for bid
} T1;
 
typedef struct T2
{
  DATE time;  // UTC timestamp in DATE format
  float fPrice; // price, negative for bid quotes
  float fVol; // trade volume or ask/bid size
} T2; 
 
typedef struct T6
{
  DATE  time; // UTC timestamp of the close, DATE format
  float fHigh,fLow;	
  float fOpen,fClose;	
  float fVal,fVol; // additional data, ask-bid spread, volume etc.
} T6;
 
typedef struct CONTRACT
{
  DATE  time;   // UTC timestamp in DATE format
  float fAsk,fBid; // premium without multiplier
  float fVal,fVol;  // additional data, like delta, open interest, etc.
  float fUnl;   // underlying price (unadjusted)
  float fStrike; // strike price
  long  Expiry; // YYYYMMDD format
  long  Type;   // PUT, CALL, FUTURE, EUROPEAN, BINARY
} CONTRACT;</code></pre><h5 id="Zipline"><a class="docs-heading-anchor" href="#Zipline">Zipline</a><a id="Zipline-1"></a><a class="docs-heading-anchor-permalink" href="#Zipline" title="Permalink"></a></h5><p>Zipline uses what they call OHLCV format, standing for Open, High, Low, Close, Volume. Is a common format to convey daily trade information about a ticker, in addition to the columns in the name actually more columns need to be provided.</p><h6 id="File-Format:-2"><a class="docs-heading-anchor" href="#File-Format:-2">File Format:</a><a class="docs-heading-anchor-permalink" href="#File-Format:-2" title="Permalink"></a></h6><p>Zipline actually stores data in a file system. Given a persistency (or cache) directory. It stores the data in bundles stored the following structure <code>$CACHE_PATH/{source_id}/{bundle_id}/</code> the bundle is then formed in <a href="https://bcolz.readthedocs.io/en/latest/intro.html"><strong>bcolz</strong></a> format</p><ol><li><strong>Zipline OHLCV</strong>: Date, Open, High, Low, Close, Volume, Dividend, Split</li></ol></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../highLevelDesign/">« Glossary</a><a class="docs-footer-nextpage" href="../../financialModelling/">Financial Modelling »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Monday 17 July 2023 00:24">Monday 17 July 2023</span>. Using Julia version 1.9.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
